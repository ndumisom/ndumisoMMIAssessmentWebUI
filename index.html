<!DOCTYPE html>
<html>
<head>
    <title>MY MMI assessment</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="bootstrap-3.3.5-dist/css/bootstrap.css"/>
    <link rel="stylesheet" type="text/css" href="https://daneden.github.io/animate.css/animate.min.css">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:400,100,400italic,700italic,700">
    <link rel="stylesheet/less" type="text/css" href="bootstrap-3.3.5-dist/css/styles.less" />
    <script src="//cdnjs.cloudflare.com/ajax/libs/less.js/3.0.0/less.min.js" ></script>

    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js" type="text/javascript"></script>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js" type="text/javascript"></script>
</head>
<body>

<div id="response">
    <pre></pre>
</div>
<section class="form animated flipInX" id="login_form">
  <h2>Login To Your Account</h2>
  <p class="valid">Valid. Please wait a moment.</p>
  <p class="error">Error. Please enter correct Username &amp; password.</p>
  <form class="loginbox" autocomplete="off">
    <input placeholder="Username" type="text" id="username"></input>

    <input placeholder="Password" type="password" id="password"></input>
<button id="submit">Login</button>
</form>
</section>

<div class="form animated flipInX" id="choose_option">
  <h2>Choose an option</h2>
    <button  id="capture_result"> Capture Results</button>
    <div class="seperate"></div>
    <button  id="view_high_risk_patients">View High Risk Patients</button>
</div>

<div class="form animated flipInX" id="choose_option_capture">
  <h2>Choose an option</h2>
    <button  id="capture_result"> Capture Results</button>
    <div class="seperate"></div>
</div>

<table class="table table-bordered table-striped" id="view_patient">

</table>

<div class="container">
    <div class="row">
        <div class="col-md-12">
            <div class="title"></div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="pull-right">
                <button class="btn btn-success" id = "add_record" data-toggle="modal" data-target="#add_new_record_modal">Add New Record</button>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <div class="records_content"></div>
        </div>
    </div>
</div>
<!-- /Content Section -->


<!-- Bootstrap Modals -->
<!-- Modal - Add New Record/User -->
<div class="modal fade" id="add_new_record_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Add New Record</h4>
            </div>
            <div class="modal-body">

                <div class="form-group">
                    <label for="first_name">First Name</label>
                    <input type="text" id="first_name" placeholder="First Name" class="form-control"/>
                </div>

                <div class="form-group">
                    <label for="last_name">Last Name</label>
                    <input type="text" id="last_name" placeholder="Last Name" class="form-control"/>
                </div>

                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="text" id="email" placeholder="Email Address" class="form-control"/>
                </div>

                <div class="form-group">
                    <label for="email">Height</label>
                    <input type="text" id="height" placeholder="Height" class="form-control"/>
                </div>
                <div class="form-group">
                    <label for="email">Weight</label>
                    <input type="text" id="weight" placeholder="Weight" class="form-control"/>
                </div>
                <div class="form-group">
                    <label for="email">Systolic Blood Pressre</label>
                    <input type="text" id="systolic_blood_pressre" placeholder="Systolic Blood Pressre" class="form-control"/>
                </div>
                <div class="form-group">
                    <label for="email">Diastolic Blood Pressure</label>
                    <input type="text" id="diastolic_blood_pressure" placeholder="Diastolic Blood Pressure" class="form-control"/>
                </div>
                <div class="form-group">
                    <label for="email">BMI</label>
                    <input type="text" id="bmi" placeholder="BMI" class="form-control"/>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" id="add_each_patient_record">Add Record</button>
            </div>
        </div>
    </div>
</div>
<!-- // Modal -->

<!-- Modal - Update User details -->
<div class="modal fade" id="update_user_modal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <h4 class="modal-title" id="myModalLabel">Update</h4>
            </div>
            <div class="modal-body">

                <div class="form-group">
                    <label for="update_first_name">First Name</label>
                    <input type="text" id="update_first_name" placeholder="First Name" class="form-control"/>
                </div>

                <div class="form-group">
                    <label for="update_last_name">Last Name</label>
                    <input type="text" id="update_last_name" placeholder="Last Name" class="form-control"/>
                </div>

                <div class="form-group">
                    <label for="update_email">Email Address</label>
                    <input type="text" id="update_email" placeholder="Email Address" class="form-control"/>
                </div>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
                <button type="button" class="btn btn-primary" onclick="UpdateUserDetails()" >Save Changes</button>
                <input type="hidden" id="hidden_user_id">
            </div>
        </div>
    </div>
</div>
<!-- // Modal -->



<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<script>
    (function($){
        $("#view_patient").hide()
        function processForm( e ){
            $.ajax({ url:"http://localhost:8080/ndumisoMMIAssessmentRestAPI/wellness",  
                        data: JSON.stringify({username:$('#username').val(),password:$('#password').val()}), 
                        type: "POST",  
                        contentType: "application/json",
                success: function( data, textStatus, jQxhr ){
                if(data.type==="admin"){
                 $("#choose_option").show()
                 } else if(data.type==="capturer"){

                 $("#choose_option_capture").show()
                 $("#choose_option_capture").click(function () {
                 $(".container").show()
                 $("#login_form").hide()
                 $("#view_patient").show()
                 $("#choose_option").hide()
                $("#choose_option_capture").hide()
                 $(".title").html("<h1>Capture Patient health information</h1>")
                 $("#add_record ").css({position: "absolute", top: "0px",right:"0px" })
                 $(".title").css({position: "relative", top: "74px" })
                    
                 $("#view_patient").html('<tr>'+
                            '<th>No.</th>'+
                            '<th>Patient Name</th>'+
                            '<th>Patient Surname</th>'+
                            '<th>BMI</th>'+
                            '<th>Systolic Blood Pressure</th>'+
                            '<th>Diastolic Blood Pressure</th>'+
                            '<th>Captured By</th>'+
                            '<th>Captured On</th>'+
                            '<th>Update</th>'+
                            '<th>Delete</th>'+
                        '</tr>');
                 
                 // }
            
            $.ajax({ url:"http://localhost:8080/ndumisoMMIAssessmentRestAPI/wellness", 
                        type: "GET",  
                        contentType: "application/json",
                success: function( data, textStatus, jQxhr ){
                     for(var i = 0 ; i < data.length ; i++){
                    $("#view_patient").append(
                '<tr>'+
                '<td>'+i+'</td>'+
                '<td>'+data[i].name+'</td>'+
                '<td>'+data[i].surname+'</td>'+
                '<td>'+data[i].bmi+'</td>'+
                '<td>'+data[i].sBloodPressre+'</td>'+
                '<td>'+data[i].d_BloodPressue+'</td>'+
                '<td>'+data[i].capetureByName+'</td>'+
                '<td>'+new Date(data[i].capturedDate).getFullYear()+' - '+('0' + (new Date(data[i].capturedDate).getMonth()+1)).slice(-2) + ' - ' +('0' + new Date(data[i].capturedDate).getDate()).slice(-2)+'</td>'+
                '<td>'+
                    '<button onclick="" class="btn btn-warning">Update</button>'+
                '</td>'+
                '<td>'+
                    '<button onclick="" class="btn btn-danger">Delete</button>'+
                '</td>'+
                '</tr>');
                 }

                 
                 $("#add_each_patient_record").click(function () {
                    alert("why")
                  $.ajax({ url:"http://localhost:8080/ndumisoMMIAssessmentRestAPI/wellness/patient",
                        data: JSON.stringify({
                            name:$('#first_name').val(),
                            surname:$('#last_name').val(),
                            email:$('#email').val(),
                            height:$('#height').val(),
                            weight:$('#weight').val(),
                            sBloodPressre:$('#systolic_blood_pressre').val(),
                            d_BloodPressue:$('#diastolic_blood_pressure').val(),
                            bmi:$('#bmi').val()
                            
                        }), 
                        type: "POST",  
                        contentType: "application/json",
                success: function( data, textStatus, jQxhr ){
                    alert("success")
                       $("#view_patient").show()
                },
                error: function( jqXhr, textStatus, errorThrown ){
                    alert("failed")
                    alert("error"+errorThrown)
                    console.log( errorThrown );
                }
            });
                 });
                },
                error: function( jqXhr, textStatus, errorThrown ){
                    alert("error"+errorThrown)
                    console.log( errorThrown );
                }
            });
                 });
                 }
                 $("#login_form").hide()
                 
                 $("#capture_result").click(function () {
                 $(".container").show()
                 $("#login_form").hide()
                 $("#view_patient").show()
                 $("#choose_option").hide()
                 $(".title").html("<h1>Capture Patient health information</h1>")
                 $("#add_record ").css({position: "absolute", top: "0px",right:"0px" })
                 $(".title").css({position: "relative", top: "74px" })
                    
                 $("#view_patient").html('<tr>'+
                            '<th>No.</th>'+
                            '<th>Patient Name</th>'+
                            '<th>Patient Surname</th>'+
                            '<th>BMI</th>'+
                            '<th>Systolic Blood Pressure</th>'+
                            '<th>Diastolic Blood Pressure</th>'+
                            '<th>Captured By</th>'+
                            '<th>Captured On</th>'+
                            '<th>Update</th>'+
                            '<th>Delete</th>'+
                        '</tr>');
                 
                 // }
            
            $.ajax({ url:"http://localhost:8080/ndumisoMMIAssessmentRestAPI/wellness", 
                        type: "GET",  
                        contentType: "application/json",
                success: function( data, textStatus, jQxhr ){
                     for(var i = 0 ; i < data.length ; i++){
                    $("#view_patient").append(
                '<tr>'+
                '<td>'+i+'</td>'+
                '<td>'+data[i].name+'</td>'+
                '<td>'+data[i].surname+'</td>'+
                '<td>'+data[i].bmi+'</td>'+
                '<td>'+data[i].sBloodPressre+'</td>'+
                '<td>'+data[i].d_BloodPressue+'</td>'+
                '<td>'+data[i].capetureByName+'</td>'+
                '<td>'+new Date(data[i].capturedDate).getFullYear()+' - '+('0' + (new Date(data[i].capturedDate).getMonth()+1)).slice(-2) + ' - ' +('0' + new Date(data[i].capturedDate).getDate()).slice(-2)+'</td>'+
                '<td>'+
                    '<button onclick="" class="btn btn-warning">Update</button>'+
                '</td>'+
                '<td>'+
                    '<button onclick="" class="btn btn-danger">Delete</button>'+
                '</td>'+
                '</tr>');
                 }

                 
                 $("#add_each_patient_record").click(function () {
                    alert("why")
                  $.ajax({ url:"http://localhost:8080/ndumisoMMIAssessmentRestAPI/wellness/patient",
                        data: JSON.stringify({
                            name:$('#first_name').val(),
                            surname:$('#last_name').val(),
                            email:$('#email').val(),
                            height:$('#height').val(),
                            weight:$('#weight').val(),
                            sBloodPressre:$('#systolic_blood_pressre').val(),
                            d_BloodPressue:$('#diastolic_blood_pressure').val(),
                            bmi:$('#bmi').val()
                            
                        }), 
                        type: "POST",  
                        contentType: "application/json",
                success: function( data, textStatus, jQxhr ){
                    alert("success")
                       $("#view_patient").show()
                },
                error: function( jqXhr, textStatus, errorThrown ){
                    alert("failed")
                    alert("error"+errorThrown)
                    console.log( errorThrown );
                }
            });
                 });
                },
                error: function( jqXhr, textStatus, errorThrown ){
                    alert("error"+errorThrown)
                    console.log( errorThrown );
                }
            });
                 });

                 $("#view_high_risk_patients").click(function () {
                 $(".container").show()
                 $("#login_form").hide()
                 $("#view_patient").show()
                 $("#choose_option").hide()
                 $("#add_record").hide()
                 $(".title").html("<h1>High Risk Patients</h1>")
                   $("#view_patient").html('<tr>'+
                            '<th>No.</th>'+
                            '<th>Patient Name</th>'+
                            '<th>Patient Surname</th>'+
                            '<th>BMI</th>'+
                            '<th>Systolic Blood Pressure</th>'+
                            '<th>Diastolic Blood Pressure</th>'+
                            '<th>Captured By</th>'+
                            '<th>Captured On</th>'+
                            '<th>Update</th>'+
                            '<th>Delete</th>'+
                        '</tr>');
                  console.log(data)

                $.ajax({ url:"http://localhost:8080/ndumisoMMIAssessmentRestAPI/wellness", 
                        type: "GET",  
                        contentType: "application/json",
                success: function( data, textStatus, jQxhr ){
                      for(var i = 0 ; i < data.length ; i++){
                    $("#view_patient").append(
                '<tr>'+
                '<td>'+i+'</td>'+
                '<td>'+data[i].name+'</td>'+
                '<td>'+data[i].surname+'</td>'+
                '<td>'+data[i].bmi+'</td>'+
                '<td>'+data[i].sBloodPressre+'</td>'+
                '<td>'+data[i].d_BloodPressue+'</td>'+
                '<td>'+data[i].capetureByName+'</td>'+
                '<td>'+new Date(data[i].capturedDate).getFullYear()+' - '+('0' + (new Date(data[i].capturedDate).getMonth()+1)).slice(-2) + ' - ' +('0' + new Date(data[i].capturedDate).getDate()).slice(-2)+'</td>'+
                '<td>'+
                    '<button onclick="" class="btn btn-warning">Update</button>'+
                '</td>'+
                '<td>'+
                    '<button onclick="" class="btn btn-danger">Delete</button>'+
                '</td>'+
                '</tr>');
                 }
                 $(".title").css({position: "relative", top: "74px" })
                },
                error: function( jqXhr, textStatus, errorThrown ){
                    alert("error"+errorThrown)
                    console.log( errorThrown );
                }
            });
                 
                
                });
                 

                
                // $( location ).attr("href", "view_patients.php");
            //         $.ajax({ url:"http://localhost:8080/ndumisoMMIAssessmentRestAPI/wellness", 
            //             type: "GET",  
            //             contentType: "application/json",
            //     success: function( data, textStatus, jQxhr ){
            //         console.log("success",data)
            //     },
            //     error: function( jqXhr, textStatus, errorThrown ){
            //         alert("error"+errorThrown)
            //         console.log( errorThrown );
            //     }
            // });
                },
                error: function( jqXhr, textStatus, errorThrown ){
                    alert("error"+errorThrown)
                    console.log( errorThrown );
                }
            });

            e.preventDefault();
        }

        $('#submit').click( processForm );
    })(jQuery);


    $(document).ready(function() {
    //$('#username').focus();

    $('#submit').click(function() {

        event.preventDefault(); // prevent PageReLoad

       var ValidEmail = $('#username').val() === 'invitado'; // User validate
var ValidPassword = $('#password').val() === 'hgm2015'; // Password validate

        if (ValidEmail === true && ValidPassword === true) { // if ValidEmail & ValidPassword
            $('.valid').css('display', 'block');
            window.location = "http://arkev.com"; // go to home.html
        }
        else {
            $('.error').css('display', 'block'); // show error msg
        }
    });
});
</script>
<script type="text/javascript" src="js/jquery-1.11.3.min.js"></script>

<!-- Bootstrap JS file -->
<script type="text/javascript" src="bootstrap-3.3.5-dist/js/bootstrap.min.js"></script>

<!-- Custom JS file -->
<script type="text/javascript" src="js/script.js"></script>

<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-75591362-1', 'auto');
    ga('send', 'pageview');

</script>
</body>
</html>